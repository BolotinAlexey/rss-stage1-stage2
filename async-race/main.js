(()=>{"use strict";function t(t){var e=document.querySelector(t);return function(t){if(void 0===t)throw new Error("".concat(t," is not defined"));if(null===t)throw new Error("".concat(t," is null"))}(e),e}function e(t,e,n){var r,o=document.createElement(t);return o.innerHTML=n||"",e&&(r=o.classList).add.apply(r,e),o}const n=function(){function t(t){this.tag=t.tag,this.class=t.class,this.text=t.text,this.element=e(this.tag,this.class,this.text)}return t.prototype.getHTMLElement=function(){return this.element},t}();var r,o=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const a=function(t){function e(e,n,r){var o=t.call(this,{tag:"button",class:["button",e],text:n})||this;if(!(o.getHTMLElement()instanceof HTMLButtonElement))throw new Error("Input isn't HTMLInputElement");return r&&o.element.addEventListener("click",r),o}return o(e,t),e.prototype.getHTMLElement=function(){return this.element},e}(n);var c=function(){function e(){}return Object.defineProperty(e,"setTrack",{set:function(t){this.track=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"getTrack",{get:function(){return this.track},enumerable:!1,configurable:!0}),Object.defineProperty(e,"getIsRace",{get:function(){return this.isRace},enumerable:!1,configurable:!0}),Object.defineProperty(e,"setIsRace",{set:function(e){var n,r;this.isRace=e;var o=null===(n=this.track)||void 0===n?void 0:n.page.getHTMLElement().querySelector(".button-reset"),a=null===(r=this.track)||void 0===r?void 0:r.page.getHTMLElement().querySelector(".button-race");o.disabled=!e,a.disabled=e,function(e,n){if(e){var r=t(".button-generate");r instanceof HTMLButtonElement&&(r.disabled=n);var o=null==e?void 0:e.getHTMLElement().querySelectorAll(".button-remove"),a=null==e?void 0:e.getHTMLElement().querySelectorAll(".button-select"),c=null==e?void 0:e.getHTMLElement().querySelectorAll(".button-stop");(null==o?void 0:o.length)&&Object.values(o).forEach((function(t){var e=t;if(!(e instanceof HTMLButtonElement))throw new Error("btn isn't btn");e.disabled=n})),(null==a?void 0:a.length)&&Object.values(a).forEach((function(t){var e=t;if(!(e instanceof HTMLButtonElement))throw new Error("btn isn't btn");e.disabled=n})),(null==c?void 0:c.length)&&Object.values(c).forEach((function(t){var e=t;if(!(e instanceof HTMLButtonElement))throw new Error("btn isn't btn");e.disabled=n}))}}(this.track,e)},enumerable:!1,configurable:!0}),e.track=null,e.isRace=!1,e}();const i=c;var u=function(){function t(){}return Object.defineProperty(t,"setCar",{set:function(t){this.car=t;var e=i.getTrack;e&&e.loadCars()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"getCar",{get:function(){return this.car},enumerable:!1,configurable:!0}),t.car=null,t.controller=new AbortController,t}();const l=u;var s=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const f=function(t){function e(e,n){var r=t.call(this,{tag:"input",class:["input",e],text:""})||this;if(!(r.getHTMLElement()instanceof HTMLInputElement))throw new Error("Input isn't HTMLInputElement");return r.getHTMLElement().type=n,r.getHTMLElement().name=n,r}return s(e,t),e.prototype.getHTMLElement=function(){return this.element},e}(n);var p,h="http://127.0.0.1:3000",d=18,b=120,v=4e3,y=1e3,g=16777215,w=1e3;!function(t){t[t.OK=200]="OK",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(p||(p={}));var m=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},T=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};const E=function(){function t(){}return t.getCars=function(){return m(this,arguments,void 0,(function(t){var e;return void 0===t&&(t=1),T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("".concat(h,"/garage?_page=").concat(t,"&_limit=").concat(7))];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()];case 3:return e=n.sent(),console.log(e),[2,[]];case 4:return[2]}}))}))},t.getAllCars=function(){return m(this,void 0,void 0,(function(){var t;return T(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch("".concat(h,"/garage"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()];case 3:return t=e.sent(),console.log(t),[2,[]];case 4:return[2]}}))}))},t.getCount=function(t){return m(this,void 0,void 0,(function(){var e;return T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("".concat(h,"/").concat(t))];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().length];case 3:return e=n.sent(),console.log(e),[2,0];case 4:return[2]}}))}))},t.createCar=function(t){return m(this,void 0,void 0,(function(){var e;return T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("".concat(h,"/garage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()];case 3:return e=n.sent(),console.log(e),[2,null];case 4:return[2]}}))}))},t.removeCar=function(t){return m(this,void 0,void 0,(function(){var e,n;return T(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch("".concat(h,"/garage/").concat(t),{method:"DELETE"})];case 1:return e=r.sent(),console.log("remove: ".concat(e.ok)),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))},t.updateCar=function(t){return m(this,void 0,void 0,(function(){var e,n;return T(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t?[4,fetch("".concat(h,"/garage/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,color:t.color})})]:[2];case 1:return e=r.sent(),console.log("update: ".concat(e.ok)),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))},t.startStopCar=function(t,e){return m(this,void 0,void 0,(function(){var n,r;return T(this,(function(o){switch(o.label){case 0:if(o.trys.push([0,3,,4]),!t)throw new Error("Car don't exist");return[4,fetch("".concat(h,"/engine?id=").concat(t.id,"&status=").concat(e),{method:"PATCH",signal:l.controller.signal})];case 1:return n=o.sent(),console.log("".concat(e,": ").concat(n.ok)),[4,n.json()];case 2:return[2,o.sent()];case 3:throw r=o.sent(),console.log(r),r;case 4:return[2]}}))}))},t.driveCar=function(t){return m(this,void 0,void 0,(function(){var e,n;return T(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t?[4,fetch("".concat(h,"/engine?id=").concat(t.id,"&status=drive"),{signal:l.controller.signal,method:"PATCH"})]:[2,null];case 1:return(e=r.sent())&&"number"==typeof e.status?[2,e.status]:[2,null];case 2:return n=r.sent(),console.log(n),[2,null];case 3:return[2]}}))}))},t.getCar=function(t){return m(this,void 0,void 0,(function(){var e,n;return T(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch("".concat(h,"/garage/").concat(t))];case 1:return e=r.sent(),console.log("getCar: ".concat(e.ok)),[4,e.json()];case 2:return[2,r.sent()];case 3:return n=r.sent(),console.log(n),[2,void 0];case 4:return[2]}}))}))},t}();var _=function(){function t(){}return Object.defineProperty(t,"setWinners",{set:function(t){this.winners=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"getWinners",{get:function(){return this.winners},enumerable:!1,configurable:!0}),Object.defineProperty(t,"setTable",{set:function(t){this.table=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"getTable",{get:function(){return this.table},enumerable:!1,configurable:!0}),t.winners=null,t.table=null,t}();const M=_;var x=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},k=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},L=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},C=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function O(t,n){var r=e("form",["form","page__form_".concat(t)]),o=new f("form__input_name","text"),c=new f("form__input_color","color");c.getHTMLElement().value="#aaaaaa";var u=new a("form__input_submit",t);r.append(o.getHTMLElement(),c.getHTMLElement(),u.getHTMLElement()),n.getHTMLElement().append(r),r.addEventListener("submit",(function(e){return function(t,e,n){return L(this,void 0,void 0,(function(){var r,o,a,c,u,s;return C(this,(function(f){switch(f.label){case 0:if(t.preventDefault(),!((r=t.target)instanceof HTMLFormElement))throw new Error("form isn't HTMLFormElement type");if(!(r.elements[0]instanceof HTMLInputElement&&r.elements[1]instanceof HTMLInputElement))throw new Error("isn't instanceof HTMLInputElement");return o=Object(r.elements),a=o[0],c=o[1],"create"===e&&r.elements[0].value&&(function(t,e,n){x(this,void 0,void 0,(function(){var r,o,a;return k(this,(function(c){switch(c.label){case 0:return[4,E.createCar({name:t,color:e})];case 1:return c.sent(),"setCars"in(r=n)?(o=r,[4,E.getAllCars()]):[3,3];case 2:o.setCars=c.sent(),c.label=3;case 3:return(a=i.getTrack)&&a.loadCars(),[2]}}))}))}(a.value,c.value,n),r.reset()),"update"===e&&l.getCar?[4,E.updateCar({id:l.getCar.id,name:a.value,color:c.value})]:[3,4];case 1:return f.sent(),(u=i.getTrack)?[4,u.loadCars()]:[3,3];case 2:f.sent(),f.label=3;case 3:null==(s=M.getTable)||s.loadWinners(),r.reset(),Object.values(r).forEach((function(t){t.disabled=!0})),f.label=4;case 4:return[2]}}))}))}(e,t,n)})),"update"===t&&Object.values(r).forEach((function(t){t.disabled=!0}))}var H=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},S=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function P(t){var n,r,o,c,u,s;"garage"===t.namePage&&(O("create",t),O("update",t)),function(t){H(this,void 0,void 0,(function(){var n,r,o;return S(this,(function(a){switch(a.label){case 0:return[4,E.getCount(t.namePage)];case 1:return n=a.sent(),t.count=n,r=e("div",["title-wrap"]),o=e("h2",["title","".concat(t.namePage,"__title")],"".concat(t.namePage," (").concat(t.count,")")),r.append(o,function(t){return e("h3",["page-num","".concat(t.namePage,"__page-num")],"Page: #".concat(t.num))}(t)),t.getHTMLElement().append(r),[2]}}))}))}(t),r=n=t,c=(o=["prev","next"].map((function(t,e){return new a(t,t,(function(){"prev"===t&&1===n.num||(r.setNum=e%2?r.getNum+1:r.getNum-1,i.setIsRace=!1,l.controller.abort(),l.controller=new AbortController)}))})))[0],u=o[1],(s=e("div",["btns-wrap"])).append(c.getHTMLElement(),u.getHTMLElement()),n.getHTMLElement().append(s)}function j(t){return e=this,n=void 0,o=function(){var e,n,r;return function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(o){return e=t.getHTMLElement(),(null==(n=e.querySelector(".title"))?void 0:n.textContent)&&(n.textContent="".concat(t.namePage," (").concat(t.count,")")),(null==(r=e.querySelector(".page-num"))?void 0:r.textContent)&&(r.textContent="Page: #".concat(t.getNum)),[2]}))},new((r=void 0)||(r=Promise))((function(t,a){function c(t){try{u(o.next(t))}catch(t){a(t)}}function i(t){try{u(o.throw(t))}catch(t){a(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,i)}u((o=o.apply(e,n||[])).next())}));var e,n,r,o}var A=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const R=function(t){function e(e){var n=t.call(this,{tag:"section",class:["page","page__".concat(e)],text:""})||this;return n.count=0,n.num=1,n.namePage=e,n.getHTMLElement().classList.add("page__".concat(n.namePage)),P(n),n}return A(e,t),Object.defineProperty(e.prototype,"setNum",{set:function(t){this.num=t,j(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getNum",{get:function(){return this.num},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getCount",{get:function(){return this.count},enumerable:!1,configurable:!0}),e}(n),F=function(){function t(){}return Object.defineProperty(t,"getOrder",{get:function(){return this.order},enumerable:!1,configurable:!0}),Object.defineProperty(t,"setSort",{set:function(t){this.sort=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"getSort",{get:function(){return this.sort},enumerable:!1,configurable:!0}),t.order="ASC",t.sort="id",t}();var B=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},N=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};const W=function(){function t(){}return t.getWinners=function(){return B(this,arguments,void 0,(function(t){return void 0===t&&(t=1),N(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(h,"/winners?_page=").concat(t,"&_limit=").concat(10,"&_sort=").concat(F.sort,"&_order=").concat(F.order))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},t.getAllWinners=function(){return B(this,void 0,void 0,(function(){var t;return N(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch("".concat(h,"/winners"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()];case 3:return t=e.sent(),console.log(t),[2,[]];case 4:return[2]}}))}))},t.getCount=function(t){return B(this,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("".concat(h,"/").concat(t))];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().length];case 3:return e=n.sent(),console.log(e),[2,0];case 4:return[2]}}))}))},t.getWinner=function(t){return B(this,void 0,void 0,(function(){var e,n,r;return N(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,fetch("".concat(h,"/winners/").concat(t))];case 1:return e=o.sent(),[3,3];case 2:return n=o.sent(),console.log(n),[2,Promise.reject()];case 3:return console.log("getWinner: ".concat(e.ok)),[4,e.json()];case 4:return r=o.sent(),[2,e.status===p.OK?r:Promise.reject()]}}))}))},t.removeWinner=function(t){return B(this,void 0,void 0,(function(){var e,n;return N(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch("".concat(h,"/winners/").concat(t),{method:"DELETE"})];case 1:return e=r.sent(),console.log("remove: ".concat(e.ok)),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))},t.updateWinner=function(t){return B(this,void 0,void 0,(function(){var e,n;return N(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t?[4,fetch("".concat(h,"/winners/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:t.wins,time:t.time})})]:[2];case 1:return e=r.sent(),console.log("updateWinner: ".concat(e.ok)),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))},t.createWinner=function(t){return B(this,void 0,void 0,(function(){var e,n;return N(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch("".concat(h,"/winners"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return e=r.sent(),console.log("create winner: ",e.ok),[3,3];case 2:return n=r.sent(),console.log(n),[3,3];case 3:return[2]}}))}))},t}();var I=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},z=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function G(t,e){return I(this,void 0,void 0,(function(){var n,r,o;return z(this,(function(a){switch(a.label){case 0:return function(t,e){if(t.html){var n=window.innerWidth-b,r=n*d/e,o=0,a=t;a.idFrame=requestAnimationFrame((function t(){o+=r,a.html&&(a.html.style.transform="translateX(".concat(o,"px)"),o>n?a.html.style.transform="translateX(".concat(n,"px)"):a.idFrame=requestAnimationFrame(t))}))}}(t,e),[4,E.driveCar(t)];case 1:return n=a.sent(),r=t,n===p.INTERNAL_SERVER_ERROR&&t.idFrame&&(cancelAnimationFrame(t.idFrame),r.idFrame=null,(null===(o=r.html)||void 0===o?void 0:o.style.transform)&&(r.html.style.transform="".concat(r.html.style.transform," rotate(150deg)"))),[2,n]}}))}))}var V=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},q=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function D(t,e,n,r){return V(this,void 0,void 0,(function(){var e,o,a,c,i,u,l;return q(this,(function(s){switch(s.label){case 0:e="start"===n?"started":"stopped",r&&((o=null===(l=r.parentElement)||void 0===l?void 0:l.querySelector("button:disabled"))&&o instanceof HTMLButtonElement&&(o.disabled=!1),r.disabled=!0),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,E.startStopCar(t,e)];case 2:return a=s.sent(),[3,4];case 3:return c=s.sent(),console.log("An error occurred while starting/stopping the car:",c),a=void 0,[3,4];case 4:return a?(i=a.distance/a.velocity,"started"!==e?[3,6]:[4,G(t,i)]):[2,void 0];case 5:return u=s.sent(),[3,7];case 6:return function(t){var e,n=t;t.idFrame&&cancelAnimationFrame(t.idFrame),(null===(e=n.html)||void 0===e?void 0:e.style.transform)&&(n.html.style.transform="")}(t),[2,void 0];case 7:return u===p.OK?[2,{time:+(i/w).toFixed(2),car:t}]:[2,Promise.reject()]}}))}))}function U(e,n,r){return o=this,a=void 0,i=function(){var o,a;return function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(c){switch(c.label){case 0:if(!((o=e.target)instanceof HTMLButtonElement))throw new Error("".concat(o," isn't HTMLButtonElement"));switch(a=o.id){case"select":return[3,1];case"remove":return[3,2];case"start":return[3,3];case"stop":return[3,7]}return[3,8];case 1:return function(e){l.setCar=e;var n=t(".page__form_update");if(!(n[0]instanceof HTMLInputElement))throw new Error("".concat(n[0]," isn't instanceof HTMLInputElement"));if(!(n[1]instanceof HTMLInputElement))throw new Error("".concat(n[1]," isn't instanceof HTMLInputElement"));n[0].value=e.name,n[1].value=e.color,n[0].focus(),Object.values(n).forEach((function(t){t.disabled=!1}))}(n),[3,9];case 2:return function(t,e){var n,r,o,a;n=this,r=void 0,a=function(){var n,r,o;return function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(a){switch(a.label){case 0:return n=e.page,[4,E.removeCar(t.id)];case 1:return a.sent(),"setCars"in n?(r=n,[4,E.getAllCars()]):[3,3];case 2:r.setCars=a.sent(),a.label=3;case 3:return[4,e.loadCars()];case 4:a.sent(),a.label=5;case 5:return a.trys.push([5,9,,10]),[4,W.getWinner(t.id)];case 6:return a.sent()?[4,W.removeWinner(t.id)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return a.sent(),console.log("There is'nt car"),[3,10];case 10:return null===(o=M.getTable)||void 0===o||o.loadWinners(),[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function c(t){try{u(a.next(t))}catch(t){e(t)}}function i(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(c,i)}u((a=a.apply(n,r||[])).next())}))}(n,r),[3,9];case 3:return c.trys.push([3,5,,6]),[4,D(n,0,a,o)];case 4:return c.sent(),[3,6];case 5:return c.sent(),console.log("Crash drive ".concat(n.name,"!!!")),[3,6];case 6:case 8:return[3,9];case 7:return D(n,0,a,o),[3,9];case 9:return[2]}}))},new((c=void 0)||(c=Promise))((function(t,e){function n(t){try{u(i.next(t))}catch(t){e(t)}}function r(t){try{u(i.throw(t))}catch(t){e(t)}}function u(e){var o;e.done?t(e.value):(o=e.value,o instanceof c?o:new c((function(t){t(o)}))).then(n,r)}u((i=i.apply(o,a||[])).next())}));var o,a,c,i}var Z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},K=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Q=function(t){function n(e){var n=t.call(this,{tag:"div",class:["track"],text:""})||this;return n.cars=[],n.page=e,n.loadCars(),n}return Z(n,t),n.prototype.loadCars=function(){return J(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return t=this,[4,E.getCars(this.page.num)];case 1:return t.cars=e.sent(),!this.cars.length&&this.page.num>1&&i.getTrack&&i.getTrack.page instanceof R&&(i.getTrack.page.setNum=this.page.num-1),this.refreshCars(),[2]}}))}))},n.prototype.refreshCars=function(){return J(this,void 0,void 0,(function(){var t=this;return K(this,(function(n){return this.getHTMLElement().innerHTML="",this.cars.forEach((function(n){var r=function(t,n){var r=e("div",["road-wrap"]),o=e("div",["btns-car-wrap"]),c=e("div",["road"]),i=e("span",["road__car"]);t.html=i;var u=["select","remove","start","stop"].map((function(e){var r=new a("button-".concat(e),e,(function(e){return U(e,t,n)}));return"stop"===e&&(r.getHTMLElement().disabled=!0),r.getHTMLElement().id=e,r.getHTMLElement()}));o.append.apply(o,u);var l=e("h4",["car-title"],t.name);return i.insertAdjacentHTML("afterbegin",'<svg width="50px" height="50px" viewBox="0 0 1024 1024" class="icon car-svg"  version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M766.976 508.736c80.576 0 152.448 32.128 199.232 82.176" fill="#AEBCC3" /><path d="M64.704 684.992c10.816 19.2 32.064 32.192 56.576 32.192h784.64c35.84 0 64.832-27.648 64.832-61.76v-17.408h-36.608a15.744 15.744 0 0 1-16.064-15.296V550.912a277.568 277.568 0 0 0-150.144-44.16h1.6l-55.04-0.256c-53.632-115.2-157.504-210.752-294.208-210.752-136.512 0-251.008 89.728-282.176 210.688h-16.832c-35.456 0-56.128 27.392-56.128 61.184" /><path d="M64.704 654.464h13.76a39.168 39.168 0 0 0 40.064-38.272v-17.6c0-21.12-17.92-38.208-40.064-38.208h-13.376" fill="#F5BB1D" /><path d="M160 684.992a101.632 96.832 0 1 0 203.264 0 101.632 96.832 0 1 0-203.264 0Z" fill="#455963" /><path d="M218.88 684.992a42.752 40.768 0 1 0 85.504 0 42.752 40.768 0 1 0-85.504 0Z" fill="#AEBCC3" /><path d="M652.032 684.992a101.568 96.832 0 1 0 203.136 0 101.568 96.832 0 1 0-203.136 0Z" fill="#455963" /><path d="M710.912 684.992a42.752 40.768 0 1 0 85.504 0 42.752 40.768 0 1 0-85.504 0Z" fill="#AEBCC3" /><path d="M966.272 591.104v-0.192a257.92 257.92 0 0 0-48.192-40V622.72c0 8.448 7.232 15.296 16.064 15.296h36.608v-42.304l-4.48-4.608z" fill="#F5BB1D" /><path d="M405.568 335.616c-104.896 6.336-191.296 76.8-216.64 170.816h216.64V335.616zM445.696 506.432h216.64c-41.216-86.848-117.12-159.616-216.64-170.048v170.048z" fill="#631536" /></svg>'),i.style.color=t.color,c.append(i),c.insertAdjacentHTML("beforeend",'<svg  class="icon flag-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="40" height="40"><path fill="#FFFFFF" d="M32.5 23.8c0 .1.1.3.2.4-.1-.2-.1-.3-.2-.4zM49.5 21c-.1 0-.1 0-.2-.1m-9 7.3l.2.2V28c-.1.1-.2.1-.2.2z"></path><path fill="#FFFFFF" d="M60.9 11.4c-.5-.4-1-.3-1.5-.1-2.2.9-4.4 1.5-6.7 1.7-4 .5-7.5-.4-10.5-3.2L40.1 8c-2-1.7-4.1-3.3-6.6-4.2-3.1-1.2-6.4-1.7-9.8-1.8-3.5 0-7.1.4-10.5 1.5-1.6.5-3.2 1.2-4.8 1.8 0 .6.1 1.2.1 1.8 0 .4.1.8.1 1.2l1.6-.3 2.4 30.5-1.6.9c.1.9.1 1.6.2 2.6l2.9-1.3c.7-.4 1.5-.7 2.2-1 1.4-.6 2.9-1 4.5-1.3 2.3-.4 4.6-.4 6.8.3 2.1.6 4 1.6 5.9 2.7 1.8 1 3.5 2.1 5.4 2.9 4 1.6 8.2 1.7 12.5.9.7-.1 1.1-.5 1.3-1.2 2.8-10.3 5.6-20.7 8.5-31 .2-.6.1-1.1-.3-1.6zM23.8 24.2c-.4 2.4-.8 4.9-1.1 7.3-.2 1.2-.3 2.4-.5 3.4-.9 0-1.8.2-2.7.3-1.4.3-2.7.6-4.1 1.1l-1.2-13.8c3.1.1 6.6 1 9.7 1.1-.1.2-.1.4-.1.6zM40.4 28v.4l-.2-.2c-.1.2-.2.6-.3 1.2-.3 1.9-.7 3.8-1 5.8-.3 1.8-.6 3.7-.9 5.5-1-.5-2-1-3-1.6-.3-.2-.6-.3-.9-.5-1.9-1.1-4-1.8-3.3-1.7.1-.4.2-1.4.2-1.8.4-3.3 1.2-7 1.6-10.4v-.5c-.1-.1-.2-.2-.2-.4-.1 0-.1-.1-.2-.1-2.4-.9-5.3-.6-7.8-.5.2-1.9.7-7.4.9-9h-.1c0-.1 0-.3.1-.4-.7-.1-8-.6-11.2-.9-.4 0-.6 0-.8.1l-.6-6.9c.2 0 .3-.1.5-.1 2.8-.9 6-1.4 9.6-1.3 1.4 0 2.7.1 3.9.3l-.6 3.6c-.3 1.8-.5 3.5-.8 5.4v.4c2.6.5 5.1 1.1 7.7 1.6.3-2.4.7-4.9 1-7.3 0-.3.1-.7.2-1.1 1 .6 2.1 1.4 3.3 2.4.3.2.5.5.8.7.4.4.9.7 1.2 1.1.3.3.6.6 1 .8v.3c-.1 1-.3 1.9-.4 2.9-.2 1.3-.3 2.7-.5 4 2.6.5 5.2 1.1 7.7 1.6 0 .1-.5 6.7-.3 8.6-.3-.2-.6-.2-.9-.3-1.7-.6-3.5-1.1-5.2-1.6-.3-.1-.4-.1-.5-.1zm9 14.1c-1.3.2-2.5.3-3.7.3l1.2-7.8c.2-1.4.6-3.1.5-4l5.2-.1c-1.1 4-2.2 7.9-3.2 11.6zm5.4-19.6L49.5 21l-2.3-.6v-.1c.1-1.4.3-2.8.4-4.2 0-.2 0-.4.1-.6.7.1 1.4.1 2.1.1.8 0 1.6 0 2.3-.1 1.6-.2 3.2-.5 4.7-1-.6 2.8-1.3 5.4-2 8z" ></path><path fill="#FFFFFF" d="M40.4 28v.4l-.2-.2c-.3-.1-5.5-3-7.5-3.9l-.1-.1c-.1-.1-.2-.2-.2-.4v-.1c.1-1.9.2-3.9.4-5.8 0-.6.1-1.3.2-2.1.7.3 1.4.6 2 .9 1.3.7 2.7 1.5 4 2.3.2.2.5.6.5.8-.1 2.4.9 5.8.9 8.2zM7 58.2l-.3-4.5c-.2-2.3-.4-4.6-.6-7-.2-3-.5-5.9-.7-8.9l-.6-8.4c-.2-2.8-.5-5.7-.7-8.5-.2-2.3-.4-4.6-.5-6.9-.2-2.9-.4-5.7-.7-8.6-.1-.7-.1-1.3-.2-1.9 0-.9.5-1.6 1.3-1.6.7-.1 1.5.5 1.5 1.3.2 2.1.3 4.2.5 6.4.2 2.9.5 5.9.7 8.8.2 2.3.3 4.5.5 6.8.2 2.9.5 5.8.7 8.8.2 2.3.3 4.5.5 6.8.2 2.9.5 5.8.7 8.8.2 2.7.4 5.4.6 8.2 0 .4.1.6.6.7.9.2 1.9.4 2.7.8.4.2.8.7.8 1 0 .4-.5.8-.9 1-1.7.9-3.6 1-5.5.9-.7-.2-1.5-.4-2.4-.6l-.9-.3c-.5-.3-1.1-.5-1-1.2 0-.7.6-1 1.1-1.1.8-.3 1.8-.6 2.8-.8z" ></path></svg>'),r.append(l,o,c),r}(n,t);t.getHTMLElement().append(r)})),[2]}))}))},n}(n);const X=Q,Y=["Jaguar","Unique","Pagani","Campagna","Alfa-Romeo","Elfin","Ferrari","NIE","Volkswagen","Suzuki","Audi","Opel","Volvo","Mitsubishi","Lobini","Maserati","Callaway","Seat","Gumpert","Chevrolet","Chrysler","Skoda","Cadillac","Corvette","Noble","Tata","Honda","BMW","Ford","Dodge","Humer","Holden","Bristol","Porsche","Maybach","Lotus","Toyota","Roadcars","Ascari","Mini","Kia","Aston","Martin","Peugeot","Saab","Renault","LandRover","Saturn","Smart","Perodua","Radical","Ariel","Brooke","Ssangyong","Marcos","Invicta","Subaru","Alpina","Proton","Isuzu","Koenigsegg","Fiat","Lexus","Tesla","SSC","Hyundai","Mazda","Spyker","Jeep","Rolls-Royce","TVR","Morgan","Citroen","Mercedes","Westfield","Nissan","Caerham","Daihatsu","Lamborghini","Shelby","Vauxhal","Bentley"];function $(){var t=Y[Math.random()*Y.length^0],e=Y[Math.random()*Y.length^0];if(t===e)return $();var n="#".concat(Math.floor(Math.random()*g).toString(16));return{name:"".concat(t,"_").concat(e),color:n}}var tt=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},et=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function nt(t){return tt(this,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,6]),[4,W.getWinner(t.car.id)];case 1:return(e=n.sent())?[4,W.updateWinner({id:t.car.id,wins:e.wins+1,time:Math.min(e.time,t.time)})]:[3,3];case 2:n.sent(),n.label=3;case 3:return[3,6];case 4:return n.sent(),[4,W.createWinner({id:t.car.id,wins:1,time:t.time})];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))}function rt(t,e){var n;if(t instanceof HTMLElement){var r=null===(n=t.parentElement)||void 0===n?void 0:n.parentElement;if(r){var o=r.querySelector(".button-start");if(o instanceof HTMLButtonElement&&(o.disabled=e),r){var a=r.querySelector(".button-stop");a instanceof HTMLButtonElement&&(a.disabled=!e)}}}}function ot(t,e){var n=t.querySelector(".button-race");n instanceof HTMLButtonElement&&(n.disabled=e);var r=t.querySelector(".button-reset");r instanceof HTMLButtonElement&&(r.disabled=!e)}function at(t){var n,r=e("h4",["winner-title"],"Winner is ".concat(t));setTimeout((function(){return r.classList.add("show")}),y),null===(n=i.getTrack)||void 0===n||n.getHTMLElement().append(r),setTimeout((function(){return r.remove()}),v),setTimeout((function(){return r.classList.remove("show")}),v-y)}function ct(t,e,n){switch(e){case"generate":!function(t){var e,n,r,o;e=this,n=void 0,o=function(){var e,n,r,o,a,c,u;return function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(l){switch(l.label){case 0:for(e=[],n=0;n<100;n+=1)r=$(),null!==(o=E.createCar(r))&&e.push(o);return[4,Promise.all(e)];case 1:return l.sent(),"setCars"in(a=t)?(c=a,[4,E.getAllCars()]):[3,3];case 2:c.setCars=l.sent(),l.label=3;case 3:return(u=i.getTrack)&&u.loadCars(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,a){function c(t){try{u(o.next(t))}catch(t){a(t)}}function i(t){try{u(o.throw(t))}catch(t){a(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,i)}u((o=o.apply(e,n||[])).next())}))}(n);break;case"race":!function(){var t,e,n,r;t=this,e=void 0,r=function(){var t,e,n,r;return function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(o){switch(o.label){case 0:if(!(t=i.getTrack))return[2];ot(t.getHTMLElement(),!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.any(t.cars.map((function(t){var e;rt(t.html,!0);try{e=D(t,0,"start")}catch(t){console.log("There is'nt winner")}return e})))];case 2:return e=o.sent(),[3,4];case 3:return n=o.sent(),console.log(n),[3,4];case 4:return e?(at(e.car.name),[4,nt(e)]):[3,6];case 5:return o.sent(),null===(r=M.getTable)||void 0===r||r.loadWinners(),[3,7];case 6:at("nobody"),o.label=7;case 7:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))}(),i.setIsRace=!0;break;case"reset":!function(){var t,e,n,r;t=this,e=void 0,r=function(){var t,e;return function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(n){switch(n.label){case 0:if(!(t=i.getTrack))return[2];ot(t.getHTMLElement(),!1),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.allSettled(t.cars.map((function(t){return rt(t.html,!1),D(t,0,"stop")})))];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),console.log(e),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))}(),i.setIsRace=!1}}var it=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(t){function n(){var n=t.call(this,"garage")||this;n.cars=[],n.car=null,i.setTrack=new X(n);var r=i.getTrack;return r&&n.getHTMLElement().append(r.getHTMLElement()),function(t){var n=["race","reset","generate"].map((function(e){return new a("button-".concat(e),e,(function(n){return ct(0,e,t)})).getHTMLElement()})),r=e("div",["race-reset-wrap"]);r.append.apply(r,n),t.getHTMLElement().append(r)}(n),n}return it(n,t),Object.defineProperty(n.prototype,"setCars",{set:function(t){this.cars=t,this.count=this.cars.length,j(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getCars",{get:function(){return this.cars},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"setNum",{set:function(t){this.num=t,j(this);var e=i.getTrack;e&&e.loadCars()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"setCar",{set:function(t){this.car=t;var e=i.getTrack;e&&e.loadCars()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getCar",{get:function(){return this.car},enumerable:!1,configurable:!0}),n}(R);const lt=ut;var st=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ft=function(t){function n(e,n){var r=t.call(this,{tag:"tr",class:["table__tr"],text:""})||this;return r.createRowMarkup(e,n),r}return st(n,t),n.prototype.createRowMarkup=function(t,n){return r=this,o=void 0,c=function(){var r,o,a,c,i,u;return function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(l){switch(l.label){case 0:return[4,E.getCar(t.id)];case 1:return(r=l.sent())?((o=e("div",["table__td","table__td_car"])).insertAdjacentHTML("afterbegin",'<svg width="50px" height="50px" viewBox="0 0 1024 1024" class="icon car-svg"  version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M766.976 508.736c80.576 0 152.448 32.128 199.232 82.176" fill="#AEBCC3" /><path d="M64.704 684.992c10.816 19.2 32.064 32.192 56.576 32.192h784.64c35.84 0 64.832-27.648 64.832-61.76v-17.408h-36.608a15.744 15.744 0 0 1-16.064-15.296V550.912a277.568 277.568 0 0 0-150.144-44.16h1.6l-55.04-0.256c-53.632-115.2-157.504-210.752-294.208-210.752-136.512 0-251.008 89.728-282.176 210.688h-16.832c-35.456 0-56.128 27.392-56.128 61.184" /><path d="M64.704 654.464h13.76a39.168 39.168 0 0 0 40.064-38.272v-17.6c0-21.12-17.92-38.208-40.064-38.208h-13.376" fill="#F5BB1D" /><path d="M160 684.992a101.632 96.832 0 1 0 203.264 0 101.632 96.832 0 1 0-203.264 0Z" fill="#455963" /><path d="M218.88 684.992a42.752 40.768 0 1 0 85.504 0 42.752 40.768 0 1 0-85.504 0Z" fill="#AEBCC3" /><path d="M652.032 684.992a101.568 96.832 0 1 0 203.136 0 101.568 96.832 0 1 0-203.136 0Z" fill="#455963" /><path d="M710.912 684.992a42.752 40.768 0 1 0 85.504 0 42.752 40.768 0 1 0-85.504 0Z" fill="#AEBCC3" /><path d="M966.272 591.104v-0.192a257.92 257.92 0 0 0-48.192-40V622.72c0 8.448 7.232 15.296 16.064 15.296h36.608v-42.304l-4.48-4.608z" fill="#F5BB1D" /><path d="M405.568 335.616c-104.896 6.336-191.296 76.8-216.64 170.816h216.64V335.616zM445.696 506.432h216.64c-41.216-86.848-117.12-159.616-216.64-170.048v170.048z" fill="#631536" /></svg>'),o.style.color=r.color,a=e("td",["table__td","table__td_name"],r.name),c=e("td",["table__td","table__td_wins"],t.wins.toString()),i=e("td",["table__td","table__td_wins"],t.time.toString()),u=e("td",["table__td","table__td_number"],(n+1).toString()),this.getHTMLElement().append(u,o,a,c,i),[2]):[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{u(c.next(t))}catch(t){e(t)}}function i(t){try{u(c.throw(t))}catch(t){e(t)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof a?r:new a((function(t){t(r)}))).then(n,i)}u((c=c.apply(r,o||[])).next())}));var r,o,a,c},n.prototype.getHTMLElement=function(){if(!(this.element instanceof HTMLTableRowElement))throw new Error("row isn't HTMLTableRowElement");return this.element},n}(n);var pt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function c(t){try{u(r.next(t))}catch(t){a(t)}}function i(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}u((r=r.apply(t,e||[])).next())}))},dt=function(t,e){var n,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};const bt=function(t){function n(e){var n=t.call(this,{tag:"table",class:["table"],text:""})||this;return n.winners=[],n.page=e,n.loadWinners(),n}return pt(n,t),n.prototype.loadWinners=function(){return ht(this,void 0,void 0,(function(){var t;return dt(this,(function(e){switch(e.label){case 0:return t=this,[4,W.getWinners(this.page.num)];case 1:return t.winners=e.sent(),!this.winners.length&&this.page.num>1&&M.getTable&&M.getTable.page instanceof R&&(M.getTable.page.setNum=this.page.num-1),this.refreshWinners(),[2]}}))}))},n.prototype.refreshWinners=function(){return ht(this,void 0,void 0,(function(){var t,n=this;return dt(this,(function(r){switch(r.label){case 0:return this.getHTMLElement().innerHTML="",o=this.getHTMLElement(),c=e("thead",["table__thead"]),i=e("tr",["table__tr"]),u=["Number","Car","Name","Wins","Best_time"].map((function(t){var n=e("th",["table__th","table__td_".concat(t.toLowerCase())],t);return"Wins"!==t&&"Best_time"!==t||n.append(function(t){var e=new a("table__arrow","",(function(e){return function(t,e){F.sort="Wins"===e?"wins":"time",F.order="ASC"===F.order?"DESC":"ASC";var n=M.getTable;n&&n.loadWinners()}(0,t)}));return e.getHTMLElement().insertAdjacentHTML("beforeend",'<svg width="16px" height="16px" viewBox="0 0 16 16" class="icon arrow-svg"><path d="M2 4H0l3-4 3 4H4v12H2V4zm12 8h2l-3 4-3-4h2V0h2v12z" fill-rule="evenodd"/>\n</svg>'),e.getHTMLElement()}(t)),n})),i.append.apply(i,u),c.append(i),o.append(c),this.winners.forEach((function(t,e){var r=function(t,e,n){return new ft(t,n).getHTMLElement()}(t,0,10*(n.page.getNum-1)+e);n.getHTMLElement().append(r)})),t=this.page,[4,W.getCount("winners")];case 1:return t.count=r.sent(),j(this.page),[2]}var o,c,i,u}))}))},n.prototype.getHTMLElement=function(){if(!(this.element instanceof HTMLTableElement))throw new Error("".concat(this.element," isn't HTMLTableElement"));return this.element},n}(n);var vt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const yt=function(t){function e(){var e=t.call(this,"winners")||this;e.table=null,M.setTable=new bt(e);var n=M.getTable;return n&&e.getHTMLElement().append(n.getHTMLElement()),e}return vt(e,t),Object.defineProperty(e.prototype,"setNum",{set:function(t){this.num=t,j(this);var e=M.getTable;e&&e.loadWinners()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getNum",{get:function(){return this.num},enumerable:!1,configurable:!0}),e}(R);var gt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const wt=function(t){function e(e,n,r){var o=t.call(this,{tag:"a",class:["link",e],text:n})||this;return o.element.addEventListener("click",r),o}return gt(e,t),e}(n);var mt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Tt=function(n){function r(){var r,o,a=n.call(this,{tag:"header",class:["header"],text:""})||this;return a.nav=(r=a.element,o=e("nav",["nav"]),r.append(o),o),a.links=function(e){return["garage","winners"].map((function(n,r){var o=new wt("link__".concat(n),"to ".concat(n.toUpperCase()),(function(e){return function(e,n){["link","page"].forEach((function(r){e.target&&function(e,n){var r=t(".active-".concat(e)),o=t(".".concat(e,"__").concat(n));r&&r.classList.remove("active-".concat(e)),o.classList.add("active-".concat(e))}(r,n)}))}(e,n)}));return r||o.getHTMLElement().classList.add("active-link"),e.append(o.getHTMLElement()),o.getHTMLElement()}))}(a.nav),a}return mt(r,n),r}(n);var Et=function(){function n(){}return n.createView=function(){var n=new Tt,r=t("body"),o=e("main",["main","container"],""),a=new yt,c=new lt;c.getHTMLElement().classList.add("active-page"),o.append(c.getHTMLElement(),a.getHTMLElement()),r.append(n.getHTMLElement(),o)},n}();Et.createView()})();